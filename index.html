<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gerenciamento de Ã“ticas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo"><span class="logo-icon">ğŸ‘“</span><span class="logo-text">Ã“ticasPro</span></div>
        </div>
        <ul class="nav-menu">
            <li class="nav-item active" data-page="dashboard"><span class="nav-icon">ğŸ“Š</span><span>Dashboard</span>
            </li>
            <li class="nav-item" data-page="oticas"><span class="nav-icon">ğŸª</span><span>Ã“ticas</span></li>
            <li class="nav-item" data-page="clientes"><span class="nav-icon">ğŸ‘¥</span><span>Clientes</span></li>
            <li class="nav-item" data-page="receitas"><span class="nav-icon">ğŸ“‹</span><span>Receitas</span></li>
            <li class="nav-item" data-page="pagamentos"><span class="nav-icon">ğŸ’°</span><span>Pagamentos</span></li>
            <li class="nav-item" data-page="exportar"><span class="nav-icon">ğŸ“¤</span><span>Exportar</span></li>
        </ul>
        <div style="margin-top: auto; padding: 1rem; border-top: 1px solid var(--border);">
            <button id="btnLogout"
                style="width:100%; padding:0.8rem; background:transparent; border:1px solid var(--danger); color:var(--danger); border-radius:0.5rem; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:0.5rem;">
                <span>ğŸšª</span> Sair
            </button>
        </div>
    </nav>

    <main class="main-content">
        <header class="header">
            <button class="menu-toggle" id="menuToggle">â˜°</button>
            <h1 id="pageTitle">Dashboard</h1>
            <span class="date-display" id="dateDisplay"></span>
        </header>

        <section class="page active" id="page-dashboard">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon blue">ğŸª</div>
                    <div class="stat-info"><span class="stat-value" id="totalOticas">0</span><span
                            class="stat-label">Ã“ticas</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon green">ğŸ‘¥</div>
                    <div class="stat-info"><span class="stat-value" id="totalClientes">0</span><span
                            class="stat-label">Clientes</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon purple">ğŸ“‹</div>
                    <div class="stat-info"><span class="stat-value" id="totalReceitas">0</span><span
                            class="stat-label">Receitas</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon gold">ğŸ’°</div>
                    <div class="stat-info"><span class="stat-value" id="totalPagamentos">R$ 0</span><span
                            class="stat-label">Recebido</span></div>
                </div>
            </div>
            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <h3>Atendimentos Recentes</h3>
                    </div>
                    <div class="card-body" id="recentActivity">
                        <p class="empty-state">Nenhum atendimento registrado.</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3>Pagamentos</h3>
                    </div>
                    <div class="card-body">
                        <div class="payment-chart">
                            <div class="chart-item">
                                <div class="chart-bar otica" id="barOtica"></div><span>Ã“tica</span><span
                                    id="valorOtica">R$ 0</span>
                            </div>
                            <div class="chart-item">
                                <div class="chart-bar cliente" id="barCliente"></div><span>Cliente</span><span
                                    id="valorCliente">R$ 0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="page" id="page-oticas">
            <div class="page-header">
                <h2>Gerenciar Ã“ticas</h2><button class="btn-primary" id="btnNovaOtica">+ Nova Ã“tica</button>
            </div>
            <div class="search-bar"><input type="text" placeholder="Buscar Ã³tica..." id="searchOtica"></div>
            <div class="cards-grid" id="oticasList">
                <p class="empty-state">Nenhuma Ã³tica cadastrada.</p>
            </div>
        </section>

        <section class="page" id="page-clientes">
            <div class="page-header">
                <h2>Gerenciar Clientes</h2><button class="btn-primary" id="btnNovoCliente">+ Novo Cliente</button>
            </div>
            <div class="filter-bar"><select id="filterOticaCliente">
                    <option value="">Todas as Ã“ticas</option>
                </select><input type="text" placeholder="Buscar cliente..." id="searchCliente"></div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Telefone</th>
                            <th>Ã“tica</th>
                            <th>Ãšltima Consulta</th>
                            <th>AÃ§Ãµes</th>
                        </tr>
                    </thead>
                    <tbody id="clientesList">
                        <tr>
                            <td colspan="5" class="empty-state">Nenhum cliente cadastrado.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section class="page" id="page-receitas">
            <div class="page-header">
                <h2>Receitas de Ã“culos</h2><button class="btn-primary" id="btnNovaReceita">+ Nova Receita</button>
            </div>
            <div class="filter-bar"><select id="filterOticaReceita">
                    <option value="">Todas as Ã“ticas</option>
                </select><select id="filterClienteReceita">
                    <option value="">Todos os Clientes</option>
                </select><input type="date" id="filterDataReceita"></div>
            <div class="receitas-grid" id="receitasList">
                <p class="empty-state">Nenhuma receita cadastrada.</p>
            </div>
        </section>

        <section class="page" id="page-pagamentos">
            <div class="page-header">
                <h2>Pagamentos</h2>
            </div>
            <div class="filter-bar"><select id="filterOticaPagamento">
                    <option value="">Todas</option>
                </select><select id="filterStatusPagamento">
                    <option value="">Todos</option>
                    <option value="pago_otica">Ã“tica</option>
                    <option value="pago_cliente">Cliente</option>
                    <option value="pendente">Pendente</option>
                </select></div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Cliente</th>
                            <th>Ã“tica</th>
                            <th>ServiÃ§o</th>
                            <th>Valor</th>
                            <th>Pagador</th>
                            <th>AÃ§Ãµes</th>
                        </tr>
                    </thead>
                    <tbody id="pagamentosList">
                        <tr>
                            <td colspan="7" class="empty-state">Nenhum pagamento.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section class="page" id="page-exportar">
            <div class="page-header">
                <h2>Exportar Dados</h2>
            </div>
            <div class="export-grid">
                <div class="export-card">
                    <div class="export-icon">ğŸ“Š</div>
                    <h3>Excel</h3>
                    <p>Baixe em formato .xlsx</p><button class="btn-primary" id="btnExportExcel">Exportar</button>
                </div>
                <div class="export-card">
                    <div class="export-icon">ğŸ“‘</div>
                    <h3>Google Sheets</h3>
                    <p>Copie para colar na planilha</p><button class="btn-secondary"
                        id="btnExportSheets">Copiar</button>
                </div>
                <div class="export-card">
                    <div class="export-icon">ğŸ’¾</div>
                    <h3>Backup</h3>
                    <p>Salve em JSON</p><button class="btn-outline" id="btnBackup">Backup</button>
                </div>
                <div class="export-card">
                    <div class="export-icon">ğŸ“¥</div>
                    <h3>Restaurar</h3>
                    <p>Importe backup</p><input type="file" id="fileRestore" accept=".json" hidden><button
                        class="btn-outline" id="btnRestore">Restaurar</button>
                </div>
            </div>
        </section>
    </main>

    <div id="loginOverlay"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg-dark); z-index:9999; align-items:center; justify-content:center; backdrop-filter:blur(10px);">
        <div class="login-card"
            style="background:var(--bg-card); padding:2.5rem; border-radius:1rem; border:1px solid var(--border); width:100%; max-width:400px; box-shadow:0 8px 32px rgba(0,0,0,0.4);">
            <div style="text-align:center; margin-bottom:2rem;">
                <span style="font-size:3rem; display:block; margin-bottom:1rem;">ğŸ‘“</span>
                <h2 style="margin:0;">Bem-vindo(a)</h2>
                <p style="color:var(--text-muted);">FaÃ§a login para acessar o sistema</p>
            </div>
            <form id="formLogin" style="display:flex; flex-direction:column; gap:1rem;">
                <div class="form-group">
                    <label>E-mail</label>
                    <input type="email" id="loginEmail" required placeholder="seu@email.com"
                        style="width:100%; padding:0.8rem; background:var(--bg-dark); border:1px solid var(--border); color:var(--text); border-radius:0.5rem;">
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="loginPass" required placeholder="Sua senha"
                        style="width:100%; padding:0.8rem; background:var(--bg-dark); border:1px solid var(--border); color:var(--text); border-radius:0.5rem;">
                </div>
                <button type="submit" id="btnLogin" class="btn-primary"
                    style="width:100%; margin-top:1rem; padding:1rem; font-size:1rem;">Entrar no Sistema</button>
            </form>
        </div>
    </div>

    <div id="modals"></div>
    <div class="toast" id="toast"><span id="toastMessage"></span></div>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- ConfiguraÃ§Ã£o do Supabase -->
    <script src="supabase-config.js?v=7"></script>

    <!-- Excel Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <script src="modals.js?v=7"></script>
    <script src="app.js?v=7"></script>
</body>

</html>